// 1: Prevent font shift on chrome.
.carousel {
	-webkit-backface-visibility: hidden; // 1
	margin-bottom: 1em;
	overflow: hidden;
	-webkit-perspective: 1000; // 1
	position: relative;

	&.no-transition > figure { transition-duration: 0s !important; }

	// Default slide version
	> figure {
		display: none;
		margin: 0;
		position: relative;
		transform: translate3d(0, 0, 0);
		transition: 0.7s ease-in-out left;

		[dir='rtl'] & { transition: 0.7s ease-in-out right; }

		> img {
			display: block;
			width: 100%;
		}

		> figcaption {
			background-color: $carousel-caption-background-color;
			bottom: 0;
			color: $carousel-caption-color;
			max-height: 50%;
			overflow-y: auto;
			padding: 1px 3em;
			position: absolute;
			width: 100%;
		}
	}

	// Indicators
	> ol {
		left: 0;
		list-style: none;
		margin: 0;
		padding: 0;
		position: absolute;
		right: 0;
		text-align: center;
		top: 1em;
		z-index: z(carousel, indicator);

		li {
			background-color: $carousel-nav-background-color;
			border: $carousel-nav-border;
			cursor: pointer;
			display: inline-block;
			height: 1em;
			margin: 1px;
			text-indent: -9999px;
			width: 1em;

			&:hover {
				background-color: $carousel-nav-background-color-hover;
				border-color: $carousel-nav-border-color-hover;
			}
		}

		.active {
			background-color: $carousel-nav-background-color-active;
			border-color: $carousel-nav-border-color-active;

			&:hover {
				background-color: $carousel-nav-background-color-active;
				border-color: $carousel-nav-border-color-active;
			}
		}
	}

	// Next Last version
	.carousel-active,
	.next,
	.prev,
	.swipe { display: block; }

	.carousel-active,
	.next.left,
	.prev.right {
		left: 0;

		[dir='rtl'] & {
			left: auto;
			right: 0;
		}
	}

	.carousel-active {
		position: relative !important;
		z-index: z(carousel, slide-active);
	}

	.next,
	.prev,
	.swipe {
		height: 100%;
		position: absolute;
		top: 0;
		width: 100%;
		z-index: z(carousel, slide-move);
	}

	.next,
	.carousel-active.right {
		left: 100%;

		[dir='rtl'] & {
			left: auto;
			right: 100%;

			&.swiping { right: -100%; }
		}
	}

	.prev,
	.carousel-active.left {
		left: -100%;

		[dir='rtl'] & {
			left: auto;
			right: -100%;

			&.swiping { right: 100%; }
		}
	}

	> button {
		background-color: transparent;
		border: 0;
		color: $carousel-control-color;
		display: block;
		font-size: 2em;
		font-weight: bold;
		left: 1px;
		margin-top: -0.5em;
		padding: 0.5em;
		position: absolute;
		text-align: center;
		text-decoration: none;
		top: 40%;
		width: 1.5em;
		z-index: z(carousel, button);

		[dir='rtl'] & {
			left: auto;
			right: 1px;
		}

		&.forward {
			left: auto;
			right: 1px;

			[dir='rtl'] & {
				left: 1px;
				right: auto;
			}
		}

		&:hover { text-decoration: underline; }
	}
}

// Fade version
.carousel-fade {
	> figure {
		bottom: 0;
		height: 100%;
		left: 0 !important;
		opacity: 0;
		position: absolute;
		right: 0 !important;
		top: 0;
		width: 100%;

		&,
		[dir='rtl'] & { transition: opacity 0.7s ease-in-out; }
	}

	> figure.swipe,
	> figure.next,
	> figure.prev {
		opacity: 1;
		z-index: z(carousel-fade, slide-move);
	}

	.carousel-active {
		opacity: 1;

		&.left,
		&.right {
			opacity: 0;
			z-index: z(carousel-fade, slide-active-move);
		}

		&.swipe { z-index: z(carousel-fade, slide-active-move); }
	}

	.carousel-control {
		&,
		&:visited { z-index: z(carousel-fade, control); }
	}
}
